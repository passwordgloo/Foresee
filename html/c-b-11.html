<!DOCTYPE HTML>
<html lang="zh-CN">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>C语言</title>
	<link rel="shortcut icon" href="../img/main/logo.ico">
	<link rel="stylesheet" href="../css/prism.css">
	<link rel="stylesheet" href="../css/language.css">
	<link rel="stylesheet" href="../css/main.css">
	<script src="../js/jquery-3.6.0.js"></script>
	<script src="../js/prism.js"></script>
	<script src="../js/toc-helper.js"></script>
	<canvas class="fireworks"></canvas>
	<script type="text/javascript" src="../js/fireworks.js"></script>
</head>

<body>
	<header>
		<nav style="text-align:right">
			<img id="logo" src="../img/main/logo.svg" alt="预见" title="预见"
				onclick="window.open('../html/index.html','_self')">
			<li class="nav__item"><a class="link" id="link_1" href="../html/index.html" title="网站首页">网站首页</a></li>
			<li class="nav__item"> <a class="link" href="../html/education.html" title="教育学">教育学</a>
				<ul class="subnav">
					<li class="subnav__item"> <a class="sublink" href="../html/list-education.html"
							title="教育学原理">教育学原理</a>
					</li>
					<li class="subnav__item"> <a class="sublink" href="../html/list-china.html" title="中国教育史">中国教育史</a>
					</li>
					<li class="subnav__item"> <a class="sublink" href="../html/list-foreign.html"
							title="外国教育史">外国教育史</a>
					</li>
					<li class="subnav__item"> <a class="sublink" title="教育心理学"
							href="../html/list-edu_psychology.html">教育心理学</a> </li>
					<li class="subnav__item"> <a class="sublink" href="../html/list-psychology.html"
							title="儿童心理学">儿童心理学</a>
					</li>
				</ul>
			</li>
			<li class="nav__item cur"> <a class="link" id="link_2" href="../html/language.html" title="编程语言">编程语言</a>
				<ul class="subnav" id="subnav_1">
					<li class="subnav__item"> <a class="sublink" title="C语言" href="../html/list-c.html">C语言</a> </li>
					<li class="subnav__item"> <a class="sublink" href="../html/list-java.html" title="Java语言">Java语言</a>
					</li>
				</ul>
			</li>
			<li class="nav__item"><a class="link" id="link_3" href="../html/computer.html" rel="nofollow"
					title="计算机">计算机</a>
				<ul class="subnav" id="subnav_2">
					<li class="subnav__item"> <a class="sublink" href="../html/list-composition.html"
							title="计算机组成原理">组成原理</a>
					<li class="subnav__item"> <a class="sublink" href="../html/list-network.html"
							title="计算机网络">计算机网络</a>
					<li class="subnav__item"><a class="sublink" href="../html/list-structure.html" title="数据结构">数据结构</a>
					<li class="subnav__item"><a class="sublink" href="../html/list-system.html" title="操作系统">操作系统</a>
				</ul>
			</li>
			<li class="nav__item"><a class="link" id="link_4" href="../html/course.html" title="学科课程">学科课程</a>
				<ul class="subnav" id="subnav_3">
					<li class="subnav__item"><a class="sublink" href="../html/list-discrete.html" title="离散数学">离散数学</a>
					<li class="subnav__item"><a class="sublink" href="../html/list-advance.html" title="高等数学">高等数学</a>
					<li class="subnav__item"><a class="sublink" href="../html/list-politics.html" title="考研政治">考研政治</a>
					<li class="subnav__item"><a class="sublink" href="../html/progress.html" title="学习进程">学习进程</a>
				</ul>
			</li>
			<li class="nav__item"><a class="link" id="link_5" href="../html/software.html" title="软件应用">软件应用</a>
				<ul class="subnav" id="subnav_4">
					<li class="subnav__item"><a class="sublink" href="../html/list-excel.html" title="电子表格">电子表格</a>
				</ul>
			</li>
			<input class="textbox" id="searchstr" type="text" size="10" name="searchstr" title="输入关键字查找当前页面">
		</nav>
	</header>
	<section>
		<div id="toc">
		</div>
	</section>
	<article data-toc="#toc">
		<hgroup>
			<h1>第十一章 位运算</h1>
		</hgroup>
		<h2>89.按位与按位或运算符</h2>
		<blockquote>
			<p><strong>&(按位与)</strong>&ensp;参加运算的两个数据，如果相应的二进制都为1，则该结果为1，否则为0</p>
			<p><strong>|(按位或)</strong>&ensp;&ensp;参加运算的两个数据，如果相应的二进制都为0，则该位结果都为0，否则为1</p>
		</blockquote>
		<h2>90.按位异或</h2>
		<pre class="line-numbers" data-prismjs-copy='复制' data-prismjs-copy-error='按Ctrl+C复制'
			data-prismjs-copy-success='成功复制！'>
<code class="lang-c match-braces rainbow-braces">#include &lt;stdio.h&gt;
void jh(void)                //交换两个变量的值，不使用中间变量
{
	int a = 3,b = 10;
	a = a^b;
	b = a^b;
	a = a^b;
	b = a^b;
	printf("%d,%d\n",a,b);
}
int main(void)
{
	int a = 123;
	printf("%d\n%d\n%d\n",a&lt;&lt;38,a&lt;&lt;(38%32),123&lt;&lt;38);   //让一个数值或者变量左移大于自身长度的位数或者使用左移右移的位数为负值，在不同的编译器中可能结果不一样，应尽量避免这种情况的发生
	return 0;
}</code></pre>
		<p><img src="https://gitee.com/passwordgloo/drawing-bed/raw/master/foresee/main/warning.png" alt="">
			按位异或也称为XOF运算符，如果相应的二进制位不同，则该位结果为1，否则为0</p>
		<h2>91.按位运算的综合运用</h2>
		<pre class="line-numbers" data-prismjs-copy='复制' data-prismjs-copy-error='按Ctrl+C复制'
			data-prismjs-copy-success='成功复制！'>
<code class="lang-c match-braces rainbow-braces">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
int add(int a,int b)                               //整数相加返回其和
{
	int c;
	while(c = a&b);
	{
		a = (c^a) | (c^b);
		b = c&lt;&lt;1;
	}
	return a|b;
}     
int pv(int a,int index)                             //返回a的第index个二进制位的值
{
	if(index &lt;= 0 || index &gt;32)
	{
		printf("pv的参数有误，程序退出\n");
		exit(-1);
	}
	return 1&(a&gt;&gt;index-1);
}
int po(int a,int index)                                 //返回把a的第index个二进制位打开之后的值
{
	if(index &lt;= 0 || index &gt;32)
	{
		printf("po的参数有误，程序退出\n");
		exit(-1);
	}
	return a|(1&lt;&lt;index-1);
}
int pc(int a,int index)                               //返回把a的第index个二进制位关闭之后的值
{
	if(index &lt;= 0 || index &gt;32)
	{
		printf("pc的参数有误，程序退出\n");
		exit(-1);
	}
	return (~(1&lt;&lt;index-1)) &a;
}
unsigned pd(unsigned a,int start,int end)              //返回a的从第start到end个二进制位的值
{
	if(start &gt; 0 && start &lt;= end && end &lt;=32)
		return a &lt;&lt; 32-end &gt;&gt; 32-(end+1-start);
	printf("pd函数参数有误，程序退出\n");
	exit(-1);
}
unsigned pf(unsigned a,unsigned b,int start,int end)   //把b的低(end-1+start)个二进制位赋给 a当中的第start到第end个二进制位，最后返回a的值
{
	if(start &gt; 0 && start &lt;= end && end &lt;=32)
	{
		int len = end+1-start;
		for(int i =1;i&lt;len;++i)
		{
			if(pv(b,1))
				a = po(a,start++);
			else
				a = pc(a,start++);
		}
		return a;
	}
	printf("pf函数参数有误，程序退出\n");
	exit(-1);
}
int mul(int a,int b)                                   //返回两个整型相乘的积
{
	int s = 0;
	for(int i =1;i&lt;=32;++i)
	{
		if(pv(b,i))
			s+=a&lt;&lt;i-1;
	}
	return s;
}
int chufa(int a,int b)                                 //返回两个整型的商
{
	if(b == 0)
	{
		printf("0不能被整除，程序退出\n");
		exit(-1);
	}
	if(a == 0)
		return 0;
	int a0 = pv(a,32);
	int b0 = pv(b,32);
	int zheng;
	if(a0^b0 == 0)
		zheng =1;
	else
		zheng =0;
	if(a0)
		a = ~(a-1);
	if(b0)
		b = ~(b-1);
	int i;
	for(i=31;i&gt;-1;--i)
	{
		if(pv(a,i))
			break;
	}
	int shang = 0,bc = 1;
	while(i-- != 0)
	{
		if(b&gt;bc)
		{
			shang &lt;&lt;1;
			if(i != 0)
				bc = bc&lt;&lt;1|pv(a,i);
		}
		else
		{
			shang &lt;&lt;=1;
			if(i != 0)
				bc = bc-b&lt;&lt;1|pv(a,i);
		}
	}
	return zheng?shang:~shang+1;
}
int main(void)
{
	printf("%d\n",add(23,14));
	printf("%d\n",pv(13,2));
	printf("%d\n",po(13,2));
	printf("%d\n",pc(13,3));
	printf("%u\n",pd(145,3,6));
	printf("%u\n",pf(15,4,2,3));
	printf("%d\n",chufa(13,2));
	return 0;
}</code></pre>
		<h2>92.位段</h2>
		<blockquote>
			<p>c允许一个结构体中以位为单位指定成员所占内存长度，这种以位为单位的成员称为“位段”，利用位段能够用较少的位数存储数据</p>
		</blockquote>
		<pre class="line-numbers" data-prismjs-copy='复制' data-prismjs-copy-error='按Ctrl+C复制'
			data-prismjs-copy-success='成功复制！'>
<code class="lang-c match-braces rainbow-braces">//举例
struct
{
	unsigned a:2;
	unsigned b:4;
	unsigned c:2;
	short m;
}data;              //a,b,c分别占2，4，2位，m为short型</code></pre>
		<div class='name'>
			<div class='attention'>注意</div>
			<div class='Content'>
				<dd class='squarepurple'>给位段赋值注意位段的范围</dd>
				<dd class='squarepurple'>声明位段的一般形式：类型名 成员名:宽度 成员名可以省略代表无名位段</dd>
				<dd class='squarepurple'>一个位段必须存储到同一存储单元中，不能跨两个单元</dd>
			</div>
		</div>
		</div>
		<div id="button_group">
			<button class="custom-btn btn-3" onclick="window.open('../html/c-b-10.2.html','_self')">
				<span>上一页</span>
			</button>
			<button class="custom-btn btn-3" onclick="window.open('../html/list-c.html','_self')">
				<span>目录</span>
			</button>
			<button class="custom-btn pure-button">
				<span>下一页</span>
			</button>
		</div>
	</article>
	<footer>
		<a href="../html/index.html" title="网站首页">网站首页</a>|
		<a href="../html/education.html" title="教育学">教育学</a>|
		<a href="../html/language.html" title="编程语言">编程语言</a>|
		<a href="../html/computer.html" title="计算机">计算机</a>|
		<a href="../html/course.html" title="学科课程">学科课程</a>|
		<a href="../html/software.html" title="软件应用">软件应用</a>
		<h5>Copyright &copy; 2022 Passwordgloo All rights reserved.</h5>
	</footer>
	<script>
		const tocHelper = new TocHelper({
			dom: 'article[data-toc]',
			offsetBody: document.querySelector('#scroll'),
		})
		tocHelper.reset()
	</script>
</body>

</html>